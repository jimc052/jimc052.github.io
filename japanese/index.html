
<!DOCTYPE html>
<html>
<head>
	<title>日文</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=no" />
	<meta http-equiv="Content-Security-Policy" content="default-src *; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'; media-src *; img-src * filesystem: data:">
	
	<!-- 
	<script src="https://unpkg.com/vue@2.7.14/dist/vue.js"></script>
	<link rel="stylesheet" href="https://unpkg.com/iview@3.5.4/dist/styles/iview.css">
	<script src="https://unpkg.com/iview@3.5.4/dist/iview.min.js"></script>
	<script src="https://unpkg.com/iview@3.5.4/dist/locale/zh-TW.js"></script>
	 -->

	<script src="../statics/vue.js"></script>
	<link href="../statics/iview/iview.min.css" rel="stylesheet">
	<script src="../statics/iview/iview.js"></script>
	<script src="../statics/iview/zh-TW.min.js"></script>

	<script src="./TTX.js"></script>
	<script src="./Player.js"></script>
	<script src="./pronounce.js"></script>
	<script src="./letter.js"></script>
	<script src="./letter-1.js"></script>
	<script src="./letter-all.js"></script>
	<script src="./vocabulary.js"></script>
	<script src="./vocabulary-editor.js"></script>
	<script src="./canvas.js"></script>
	<script src="./單字.js"></script>
	<style>
		* {
			-webkit-box-sizing: border-box;
			-moz-box-sizing: border-box;
			box-sizing: border-box;
			/* user-select: none; */
			font-family: 'Times New Roman', 'Helvetica Neue', 微軟正黑體, 'Microsoft Jhenghei', Helvetica, Arial, sans-serif;
			font-size: 16px;
		}
		body {
			/* margin: 10px; */
			background-color: #ebecf0;
			padding: 0px 0px;
			visibility: hidden;
			color: rgb(0, 0, 0);
		}
		html, body, #app {
			min-height: 100% !important;
			height: 100%;
		}

		@media screen and (min-width: 400px) {
			#tbl50 td {
				font-size: 24px;
			}

			#tbl50 td > div {
				font-size: 20px;
			}

			#tbl50 tr:first-child td, #tbl50 td:first-child {
				font-size: 24px !important;
			}
		}

		@media screen and (min-width: 800px) {
			#tbl50 td {
				font-size: 30px;
			}

			#tbl50 td > div {
				font-size: 24px;
			}

			#tbl50 tr:first-child td, #tbl50 td:first-child {
				font-size: 24px !important;
			}

			label {
				font-size: 20px !important;
				line-height: 40px !important;
				height: 40px  !important;
			}
		}

		#tbl50 {
      /* margin: 10px; */
    }

    #tbl50 td {
      font-family: "ヒラギノ角ゴ Pro W3", "Hiragino Kaku Gothic Pro", Osaka, "メイリオ", Meiryo, "ＭＳ Ｐゴシック", "MS PGothic", sans-serif;
      border: 1px solid black;
      text-align: center;
    }

    #tbl50 tr:first-child td, #tbl50 td:first-child {
      color: blue;
      /* padding: 5px 0px; */
    }

    #tbl50 td:first-child {
      width: 10%;
    }

    #tbl50 td.cell {
      width: 18%;
      cursor: pointer;
    }
		#tbl50 td.active {
      color: white;
			background-color: rgb(45, 140, 240);
    }

		.ivu-table-header thead tr th, .ivu-table-fixed-header thead tr th{
			padding: 0px;
		}
		.ivu-table-cell {
			padding-left: 5px !important;
			padding-right: 5px !important;
			font-family: "ヒラギノ角ゴ Pro W3", "Hiragino Kaku Gothic Pro", Osaka, "メイリオ", Meiryo, "ＭＳ Ｐゴシック", "MS PGothic", sans-serif;
		}
		.ivu-table td, .ivu-table th {
			height: 35px  !important;
		}
		.ivu-table th, .ivu-table th .ivu-table-cell {
			text-align: center !important;
		}
		.ivu-table td:first-child {
			/* cursor: pointer; */
			background-color: #f8f8f9;
		}
		.ivu-table-row-highlight td:first-child {
			background-color: #ebf7ff;
			color: #C0C0C0;
			font-weight: 700;
		}
		.ivu-menu-item {
			padding-left: 10px 0px 10px 20px;
			cursor: pointer;
			font-size: 20px;
			padding: 10px;
			border-right: 1px solid white;
		}
		.ivu-menu-item + .ivu-menu-item {
			/* margin-top: 0px; */
		}
		.ivu-menu-item-active {
			color: #2d8cf0; 
			background: #f0faff;
			border-right: 1px solid #2d8cf0;
		}
		.button {
			width: 40px; 
			height: 40px; 
			z-index: 10; 
			cursor: pointer;  
			color: #2d8cf0; 
			border-radius: 5px; 
			border: 1px #2d8cf0 solid; 
			background-color: white; 
			display: flex; 
			flex-direction: column; 
			justify-content: center;
			align-items: center;
		}
		.button.active {
			color: white; 
			background-color: #2d8cf0; 
		}
		.button + .button {
			margin-left: 3px;
		}
		.accent {
			margin-top: 2px;
			border-top: 2px solid red;
		}
	</style>
</head>
<body style="overflow: hidden;">
	<div id="app" style="display: flex; flex-direction: row;">
		<div :style="{width: width + 'px'}" style="height: 100%; padding: 0px; background-color: white; margin-right: 5px; display: flex; flex-direction: column; align-items: stretch; justify-content: center;"
			v-if="open"
		>
			<div style="background: #2d8cf0; padding: 5px 0px; display: flex; flex-direction: column;  justify-content: center;" 
					:style="{height: width > 30 ? null : '100%', alignItems: width > 30 ? 'flex-end' : 'center'} ">
				<Icon v-if="width > 30" type="ios-arrow-back" size="30" style="cursor: pointer; color: white;"
					@click="width = 30"
				></Icon>
				<Icon v-else type="ios-arrow-forward" size="30" style="cursor: pointer; color: white;" @click="width = 180"></Icon>
			</div>
			<ul v-if="width > 30" class="ivu-menu" style="flex: 1;">
				<li v-for="(item1, index1) in ['五十音', '筆順練習','字典']" :key="index1" class="ivu-menu-item"
					:class="{'ivu-menu-item-active': item1 == page}"
					@click="onClick(item1);"
				>
					{{item1}}
				</li>
			</ul>
		</div>
		<div style="flex: 1;">
			<pronounce v-if="page == '五十音'"></pronounce>
			<vocabulary v-else-if="page == '字典'"></vocabulary>
			<letter v-else></letter>
		</div>
	</div>
</body>
<script>
	var vm = null;
	window.onload = async function(){
		Vue.prototype.$storage = function (key, value) {
			if(typeof key == "string" && typeof value == "undefined"){
				let s = window.localStorage[key];
				if(typeof s == "undefined"){
					return {};
				}
				return JSON.parse(s);
			} 
			else {
				if(value == null)
					delete window.localStorage[key];
				else
					window.localStorage[key] = typeof value == "object" ? JSON.stringify(value) : value;
			}
		}

		Vue.prototype.$queryString = function(key) {
			let index = location.href.indexOf("?");
			let s = "";
			if(index > -1) {
				let s1 = location.href.substr(index + 1);
				let arr = s1.split("&");
				for(let i = 0; i < arr.length; i++) {
					index = arr[i].indexOf(key + "=");
					if(index > -1) {
						s = arr[i].substr(key.length + 1)
						break;
					}
				}
			}
			return decodeURI(s);
		}
		Vue.prototype.$isDebug = function() {
			return location.href.indexOf("file:///") > -1 || location.href.indexOf("192.168") > -1 ? true : false;
		}
		Vue.prototype.$japanese = function() {
			return [
				[ // 清音
					[{"平":"あ","mp3":"a","片":"ア"},{"平":"い","mp3":"i","片":"イ"},{"平":"う","mp3":"u","片":"ウ"},{"平":"え","mp3":"e","片":"エ"},{"平":"お","mp3":"o","片":"オ"}],
					[{"平":"か","mp3":"ka","片":"カ"},{"平":"き","mp3":"ki","片":"キ"},{"平":"く","mp3":"ku","片":"ク"},{"平":"け","mp3":"ke","片":"ケ"},{"平":"こ","mp3":"ko","片":"コ"}],
					[{"平":"さ","mp3":"sa","片":"サ"},{"平":"し","mp3":"shi","片":"シ"},{"平":"す","mp3":"su","片":"ス"},{"平":"せ","mp3":"se","片":"セ"},{"平":"そ","mp3":"so","片":"ソ"}],
					[{"平":"た","mp3":"ta","片":"タ"},{"平":"ち","mp3":"chi","片":"チ"},{"平":"つ","mp3":"tsu","片":"ツ"},{"平":"て","mp3":"te","片":"テ"},{"平":"と","mp3":"to","片":"ト"}],
					[{"平":"な","mp3":"na","片":"ナ"},{"平":"に","mp3":"ni","片":"ニ"},{"平":"ぬ","mp3":"nu","片":"ヌ"},{"平":"ね","mp3":"ne","片":"ネ"},{"平":"の","mp3":"no","片":"ノ"}],
					[{"平":"は","mp3":"ha","片":"ハ"},{"平":"ひ","mp3":"hi","片":"ヒ"},{"平":"ふ","mp3":"fu","片":"フ"},{"平":"へ","mp3":"he","片":"ヘ"},{"平":"ほ","mp3":"ho","片":"ホ"}],
					[{"平":"ま","mp3":"ma","片":"マ"},{"平":"み","mp3":"mi","片":"ミ"},{"平":"む","mp3":"mu","片":"ム"},{"平":"め","mp3":"me","片":"メ"},{"平":"も","mp3":"mo","片":"モ"}],
					[{"平":"や","mp3":"ya","片":"ヤ"},null,{"平":"ゆ","mp3":"yu","片":"ユ"},null,{"平":"よ","mp3":"yo","片":"ヨ"}],
					[{"平":"ら","mp3":"ra","片":"ラ"},{"平":"り","mp3":"ri","片":"リ"},{"平":"る","mp3":"ru","片":"ル"},{"平":"れ","mp3":"re","片":"レ"},{"平":"ろ","mp3":"ro","片":"ロ"}],
					[{"平":"わ","mp3":"wa","片":"ワ"},null,null,null,{"平":"を","mp3":"o","片":"ヲ"}],[{"平":"ん","mp3":"n","片":"ン"},null,null,null,null]
				], [ // 濁音
					[{"平":"が","mp3":"ga","片":"ガ"},{"平":"ぎ","mp3":"gi","片":"ギ"},{"平":"ぐ","mp3":"gu","片":"グ"},{"平":"げ","mp3":"ge","片":"ゲ"},{"平":"ご","mp3":"go","片":"ゴ"}],
					[{"平":"ざ","mp3":"za","片":"ザ"},{"平":"じ","mp3":"zi","片":"ジ"},{"平":"ず","mp3":"zu","片":"ズ"},{"平":"ぜ","mp3":"ze","片":"ゼ"},{"平":"ぞ","mp3":"zo","片":"ゾ"}],
					[{"平":"だ","mp3":"da","片":"ダ"},{"平":"ぢ","mp3":"di","片":"ヂ"},{"平":"づ","mp3":"du","片":"ヅ"},{"平":"で","mp3":"de","片":"デ"},{"平":"ど","mp3":"do","片":"ド"}],
					[{"平":"ば","mp3":"ba","片":"バ"},{"平":"び","mp3":"bi","片":"ビ"},{"平":"ぶ","mp3":"bu","片":"ブ"},{"平":"べ","mp3":"be","片":"ベ"},{"平":"ぼ","mp3":"bo","片":"ボ"}],
					[{"平":"ぱ","mp3":"pa","片":"パ"},{"平":"ぴ","mp3":"pi","片":"ピ"},{"平":"ぷ","mp3":"pu","片":"プ"},{"平":"ぺ","mp3":"pe","片":"ペ"},{"平":"ぽ","mp3":"po","片":"ポ"}]
				], [ // ゃャゅュょョ 拗音
					[
						{"平":"きゃ","mp3":"kya","片":"キャ"},null,
						{"平":"きゅ","mp3":"kyu","片":"キュ"},null,
						{"平":"きょ","mp3":"kyo","片":"キョ"}
					],
					[{"平":"しゃ","mp3":"sha","片":"シャ"},null,{"平":"しゅ","mp3":"shu","片":"シュ"},null,{"平":"しょ","mp3":"sho","片":"ショ"}],
					[{"平":"ちゃ","mp3":"cha","片":"チャ"},null,{"平":"ちゅ","mp3":"chu","片":"チュ"},null,{"平":"ちょ","mp3":"cho","片":"チョ"}],
					[{"平":"にゃ","mp3":"nya","片":"ニャ"},null,{"平":"にゅ","mp3":"nyu","片":"ニュ"},null,{"平":"にょ","mp3":"nyo","片":"ニョ"}],
					[{"平":"ひゃ","mp3":"hya","片":"ヒャ"},null,{"平":"ひゅ","mp3":"hyu","片":"ヒュ"},null,{"平":"ひょ","mp3":"hyo","片":"ヒョ"}],
					[{"平":"みゃ","mp3":"mya","片":"ミャ"},null,{"平":"みゅ","mp3":"myu","片":"ミュ"},null,{"平":"みょ","mp3":"myo","片":"ミョ"}],
					[{"平":"りゃ","mp3":"rya","片":"リャ"},null,{"平":"りゅ","mp3":"ryu","片":"リュ"},null,{"平":"りょ","mp3":"ryo","片":"リョ"}],
					[{"平":"ぎゃ","mp3":"gya","片":"ギャ"},null,{"平":"ぎゅ","mp3":"gyu","片":"ギュ"},null,{"平":"ぎょ","mp3":"gyo","片":"ギョ"}],
					[{"平":"じゃ","mp3":"zya","片":"ジャ"},null,{"平":"じゅ","mp3":"zyu","片":"ジュ"},null,{"平":"じょ","mp3":"zyo","片":"ジョ"}],
					[{"平":"びゃ","mp3":"bya","片":"ビャ"},null,{"平":"びゅ","mp3":"byu","片":"ビュ"},null,{"平":"びょ","mp3":"byo","片":"ビョ"}],
					[{"平":"ぴゃ","mp3":"pya","片":"ピャ"},null,{"平":"ぴゅ","mp3":"pyu","片":"ピュ"},null,{"平":"ぴょ","mp3":"pyo","片":"ピョ"}],
				]
			];
		}
		Vue.prototype.broadcast = new Vue(); // 廣播用元件

		vm = new Vue({
			el: '#app',
			data() {
				return {
					page: "筆順練習",
					width: document.body.clientWidth < 400 ? 30: 180,
					open: true
				};
			},
			created() {
				iview.lang('zh-TW');
				// console.log(typeof(this.$queryString('mode')) + ", " + this.$queryString('mode').length)
			},
			async mounted(){
				let self = this;
				setTimeout(() => {
					document.body.style.visibility = "visible";	
				}, 600);
				window.onresize = () => {
					return (() => {
							// self.screenWidth = document.body.clientWidth;
							self.broadcast.$emit('onResize');
					})()
				}
				let mode = this.$queryString('mode');
				if(typeof mode == "string" && mode.length > 0) {
					this.page = this.$queryString('mode');
					this.open = false;
				} else {
					let page = window.localStorage["japanese-page"];
					if(typeof page == "string" )
						this.page = page;
				}
				document.title = this.page;
			},
			methods: {
				onClick(page) {
					document.title = page;
					this.page = page;
					window.localStorage["japanese-page"] = page;
					if(document.body.clientWidth < 400)
						this.width = 30;
				}
			}
		});
	}
</script>
</html>
<!-- 
https://www.iviewui.com/view-ui-plus/component/base/icon
https://www.iviewui.com/view-ui-plus/component/form/table
https://www.iviewui.com/view-ui-plus/component/layout/split

open -a Google\ Chrome "index.html"
 -->
